<%include ../partials/header%>

<div class="container-fluid">
        <div class="row ">
                    <div class="card">
    
                        <div class="header">
                            <h4 class="title">Create New Course</h4>
                            <br>
                        </div>
                

    <div class="content">
        <form  action="/courses" method="POST" enctype="multipart/form-data" onsubmit="checkboxx('SelectedValues','course_departments');" >
            <div class="row">

                <div class="form-group col-md-8 ">
                        <label for="course_name">Course Name</label>
                    <input  name="course_name" type="text" class="form-control" required="required">
                    
                </div>
                <div class="form-group col-md-4 ">   
                    <label for="course_type">Course type</label>
                    <input id="course_type" type="text" name="course_type" class="form-control" required="required">
                    
                </div>
            </div>
            <div class="row">
                    <div class="form-group col-md-12  ">
                 <label for="textarea1">Course Description</label>  
                   <textarea id="textarea1" name="course_description"  class="form-control" rows="6" required="required"></textarea>
                    
                </div>
            </div>
            <div class="row">
                    <div class="form-group col-md-3">   
                            <label for="course_main_professor">course main professor</label>   
                            <input id="course_main_professor" name="course_main_professor" type="text"  class="form-control" required="required">
                        </div>
                        <div class="form-group col-md-3 ">  
                    <label for="course_lessons">course lessons</label>                 
                     <input id="course_lessons" name="course_lessons" type="text"  class="form-control" required="required">
                </div>
                <div class="form-group col-md-3">
                    <label for="course_hours">course hours</label>  
                     <input id="course_hours" name="course_hours" type="number"  class="form-control" required="required">
                </div>
                <div class="form-group col-md-3 ">
                    <label for="course_related_fields">course relateted fields</label>
                     <input id="course_related_fields" name="course_related_fields" type="text"  class="form-control" required="required" >
                    
                </div>
            </div>
            <div class="row">
            <div class="form-group col-md-6 " >
             <label for="registartion_closeday">registartion close day</label>
              <input id="course_registartion_closeday" name="course_registartion_closeday" type="text" class="form-control datepicker"  required="required" >

                </div>
            
            
                
                <div class="form-group col-md-6 ">
                    <label for="course_max_students">course max students</label>
                    <input id="course_max_students" name="course_max_students" type="number"  class="form-control" required="required">
                </div>
            </div>
            <div class="row">  
                <div class="col-md-6" >
                 <div class="form-group col-md-10 " style="margin-left: -15px" id="helpers">
                    <label for="course_helper_professor">course helper professor</label>
                    <input id="course_helper_professor" name="course_helper_professor" type="text"  class="form-control" required="required">

                </div>
                
                <button style="margin-bottom: -60px" type="button" class="btn btn-outline-info"  onclick="addElement2('helpers', 'p')">Add</button>
            </div>
            <div class="col-md-6">
            <!--    <input id ="add"type="button" value="Add another text input" onClick="repeat('helpers')">-->
            <div class="form-group col-md-10  " style="margin-left: -15px" id="objectives">
                        <label for="course_objectives">course objectives</label>
                        <input id="course_objectives" name="course_objectives" type="text"  class="form-control" required="required">
                        
                        
                    </div>
                    <button style="margin-bottom: -60px" type="button" class="btn btn-outline-info"  onclick="addElement('objectives', 'p')">Add</button>

                </div>
                  <!--  <input id ="add"type="button" value="Add another text input" onClick="repeat2('objectives')">-->
            </div>
            <div class="col-md-12">
 <div class=" col-md-6" style="margin-left: -30px" >
      <h4>select  departments</h4>
          <%var counter =0%>
 
           <%departments.forEach(function (department) { %> 
                       <p>
                               <label for="SelectedValues<%=counter%>"><%=department.name%></label>
                               <input type="checkbox" id="SelectedValues<%=counter%>" name="SelectedValues" value='<%=department._id%>' />
                               
                             </p>
                     <%counter ++%>
           <%});%>   
       </div>
      
     </div>
     <div class="row">
                <input name="course_departments" id="course_departments" type="hidden" value="">
             
                
                    <div class="form-group col-md-4 " >
                       <label for="coruse_logo">Course logo</label>
                            <input id="coruse_logo" class="form-control" name="my_file" type="file"required="required">
                     </div>
                    </div>
                

                     <div class="row">
                   <div class="col-md-8">
                        <button class="btn btn-info btn-fill pull-left" type="submit">Create Course </button>
                        </div>
            </div>  
            
        </form>
    </div>
   </div>
 
 </div>
</div>

<script>


$('.datepicker').datepicker();
$().button('toggle')
var objectivesid=0;
var helpersid=0;
    
function removeElement(removelement) {
    // Removes an element from the document
    var element = document.getElementById(removelement);
    console.log(element);

    console.log(element.parentElement);
    element.parentNode.removeChild(element);
    console.log("hii")

} 

  function addElement(parentId, elementTag) {
    // Adds an element to the document

    var html='course_objectives'+ objectivesid;
    var html1='</br>'+'<div class="col-md-9">'+'<input input style="margin-left: -15px" class="form-control " id="course_objectives" name="course_objectives" type="text"   required="required">'+'</div>'+
'<a style="line-height:40px" href="" onclick="javascript:removeElement(\'course_objectives' + objectivesid + '\'); return false;">Remove</a>';
    var p = document.getElementById(parentId);
    var newElement = document.createElement(elementTag);
    newElement.setAttribute('id','course_objectives'+ objectivesid);

    newElement.innerHTML = html1;
    p.appendChild(newElement);
    objectivesid++;
}


function addElement2(parentId, elementTag) {
    // Adds an element to the document
    var html='course_helper_professor'+ helpersid;
    var html1='</br>'+'<div class="col-md-9">'+'<input input style="margin-left: -15px" class="form-control col-md-10" id="course_helper_professor" name="course_helper_professor" type="text"   required="required">'+'</div>'+
'<a style="line-height:40px" href="" onclick="javascript:removeElement(\'course_helper_professor' + helpersid + '\'); return false;">Remove</a>';
    var p = document.getElementById(parentId);
    var newElement = document.createElement(elementTag);
    newElement.setAttribute('id','course_helper_professor'+ helpersid);

    newElement.innerHTML = html1;
    p.appendChild(newElement);
    helpersid++;
}

function checkboxx(listName,labelName){

  var controls = document.getElementsByName(listName);
  var label = document.getElementById(labelName);

  label.value = '';

  for(var i=0;i<controls.length;i++){
      if(controls[i].checked)
      label.value += controls[i].value.toString()+',';
      

     console.log(label.value);
     console.log(label.name);

  }

}


        
  </script>
<%include ../partials/footer%>




