<%include ../partials/header%>


<form  action="/courses/<%= course._id %>/editattendance/<%=student._id%>/<%=type%>?_method=PUT" method="POST" >
<div class="container" style="margin:auto auto;">
        <button type ="submit"class="btn btn-info btn-fill pull-right clearfix"style="margin-bottom:10px">Edit Attendance</button>
    <table id="example" class="table table-striped table-bordered " >
<thead>
    <%if(type.toString()=="lecture"){%>
<tr>
    <th>Collage_ID</th>
    <th>First name</th>
   <% for (i = 1; i < course.lecturestaken; i++) { %> 
    <th><%=type%> <%=i%></th>
        <%}%>
</tr>
</thead>
<tbody>

        <% student.courses.forEach(function(Course){ %>
            <%if(Course._id.toString()==course._id.toString()){%>

                <tr>
                        <td><%=student.username%></td>
                        <td><%=student.firstname+" "+student.lastname%></td>
    <% for (i = 1; i < course.lecturestaken; i++) { %>        
                <%Course.attendance.forEach(function(Attendance){%>
                    <%console.log(Attendance.attendancetype)%>
                    <%console.log(type.toString())%>


                    <%if(Attendance.attendancetype=="lecture"&& Attendance.number==i ){%>
                    <%if(Attendance.attended==true){%>
                        <td>
                                <div class="form-check">
                                <input class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios1" value="true" checked>
                                <label class="form-check-label" for="exampleRadios1"><a href="#"><i class="glyphicon glyphicon-ok"></i></a></label>
                                <input style=" margin-left:10px"class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios2" value="false">
                                <label class="form-check-label" for="exampleRadios2">
                                        <a  href="#"><i class="glyphicon glyphicon-remove"></i></a>
                                </label>
                              </div>
                                
                                
                            </td>


                        <%}else{%>

                            <td>
                                    <div class="form-check">
                                            <input class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios1" value="true" >
                                            <label class="form-check-label" for="exampleRadios1">
                                                    <a href="#"><i class="glyphicon glyphicon-ok"></i></a>
                                            </label>
                                            <input class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios2" value="false"checked>
                                            <label style=" margin-left:10px" class="form-check-label" for="exampleRadios2">
                                                    <a href="#"><i class="glyphicon glyphicon-remove"></i></a>
                                            </label>
                                          </div>  
                                         </td>
                            <%}%>
                        <%}%>
                    <%});%>
                <%}%>
            <%}%>
        <% }); %>
    

        
</tr>
<%}%>

<%if(type.toString()=="section"){%>
    <tr>
        <th>Collage_ID</th>
        <th>First name</th>
       <% for (i = 1; i < course.sectionstaken; i++) { %> 
        <th><%=type%> <%=i%></th>
            <%}%>
    </tr>
    </thead>
    <tbody>
    
            <% student.courses.forEach(function(Course){ %>
                <%if(Course._id.toString()==course._id.toString()){%>
    
                    <tr> 
                        <td><%=student.username%></td>
                        <td><%=student.firstname+" "+student.lastname%></td>
                   
        <% for (i = 1; i < course.sectionstaken; i++) { %>        
                    <%Course.attendance.forEach(function(Attendance){%>
                        <%console.log(Attendance.attendancetype)%>
                        <%console.log(type.toString())%>
    
    
                        <%if(Attendance.attendancetype=="Section"&& Attendance.number==i ){%>
                        <%if(Attendance.attended==true){%>
                            < <td>
                                    <div class="form-check">
                                    <input class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios1" value="true" checked>
                                    <label class="form-check-label" for="exampleRadios1">
                                            <a href="#"><i class="glyphicon glyphicon-ok"></i></a>
                                    </label>
                                  
                                    <input style=" margin-left:30px"class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios2" value="false">
                                    <label style=" margin-left:10px"class="form-check-label" for="exampleRadios2">
                                            <a  href="#"><i class="glyphicon glyphicon-remove"></i></a>
                                    </label>
                                  </div>
                                    
                                    
                                </td>
    
    
                            <%}else{%>
    
                                <td>
                                        <div class="form-check">
                                                <input class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios1" value="true" >
                                                <label class="form-check-label" for="exampleRadios1">
                                                        <a href="#"><i class="glyphicon glyphicon-ok"></i></a>
                                                </label>
                                                <input class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios2" value="false"checked>
                                                <label style=" margin-left:10px" class="form-check-label" for="exampleRadios2">
                                                        <a href="#"><i class="glyphicon glyphicon-remove"></i></a>
                                                </label>
                                              </div>                                
                                <%}%>
                            <%}%>
                        <%});%>
                    <%}%>
                <%}%>
            <% }); %>
        
    
            
    </tr>
    <%}%>

    <%if(type.toString()=="lab"){%>
        <tr>
            <th>Collage_ID</th>
            <th>First name</th>
           <% for (i = 1; i < course.labstaken; i++) { %> 
            <th><%=type%> <%=i%></th>
                <%}%>
        </tr>
        </thead>
        <tbody>
        
                <% student.courses.forEach(function(Course){ %>
                    <%if(Course._id.toString()==course._id.toString()){%>
        
                        <tr>
                                < <td><%=student.username%></td>
                                <td><%=student.firstname+" "+student.lastname%></td>
                       
            <% for (i = 1; i < course.labstaken; i++) { %>        
                        <%Course.attendance.forEach(function(Attendance){%>
                            <%console.log(Attendance.attendancetype)%>
                            <%console.log(type.toString())%>
        
        
                            <%if(Attendance.attendancetype=="Lab"&& Attendance.number==i ){%>
                            <%if(Attendance.attended==true){%>
                                <td>
                                        <div class="form-check">
                                        <input class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios1" value="true" checked>
                                        <label class="form-check-label" for="exampleRadios1">
                                                <a href="#"><i class="glyphicon glyphicon-ok"></i></a>
                                        </label>
                                      
                                        <input style=" margin-left:30px"class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios2" value="false">
                                        <label style=" margin-left:10px" class="form-check-label" for="exampleRadios2">
                                                <a  href="#"><i class="glyphicon glyphicon-remove"></i>
                                        </label>
                                      </div>
                                        
                                        
                                    </td>
        
        
                                <%}else{%>
        
                                    <td>
                                            <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios1" value="true" >
                                                    <label class="form-check-label" for="exampleRadios1">
                                                            <a href="#"><i class="glyphicon glyphicon-ok"></i></a>
                                                    </label>
                                                    <input class="form-check-input" type="radio" name="<%=Attendance.number%>" id="exampleRadios2" value="false"checked>
                                                    <label style=" margin-left:10px"class="form-check-label" for="exampleRadios2">
                                                            <a href="#"><i class="glyphicon glyphicon-remove"></i>
                                                    </label>
                                                  </div>                                
                                    <%}%>
                                <%}%>
                            <%});%>
                        <%}%>
                    <%}%>
                <% }); %>
            
        
                
        </tr>
        <%}%>



</tbody>
</table>
</div>
</form>


<%include ../partials/footer%>